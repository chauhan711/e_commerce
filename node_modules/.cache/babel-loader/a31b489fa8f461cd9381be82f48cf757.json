{"ast":null,"code":"var _jsxFileName = \"/var/www/html/dummy_applications/3rd_party_login/src/components/Login.component.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { GoogleLogin } from '@react-oauth/google';\nimport axios from 'axios';\nimport helpers from '../helpers/helper.js';\nimport { Super_Admin, Admin, User, Saler } from '../helpers/roles.helpers.js';\nimport Swal from 'sweetalert2';\nfunction Login() {\n  const navigate = useNavigate();\n  const keys = {\n    email: '',\n    password: ''\n  };\n  const [formData, setFormData] = useState(keys);\n  const [error, setError] = useState(keys);\n\n  //after successfully email login\n  const responseMessage = response => {\n    //login with google\n    axios.post(`${process.env.REACT_APP_PUBLIC_BASE_URL}/google-auth`, response).then(resp => {\n      //set token in local storage\n      localStorage.setItem('token', resp.data.token);\n      navigate('/dashboard');\n    }).catch(err => console.log('errors', err));\n  };\n\n  //after error from email\n  const errorMessage = error => {\n    console.log(error);\n    alert('Something went wrong');\n  };\n\n  //set form data\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n\n  //Login\n  const handleSubmit = e => {\n    let error = null;\n    if (formData.email == '') {\n      error = true;\n      setError(errro => ({\n        ...error,\n        email: 'Email is required.'\n      }));\n    }\n    if (formData.password == '') {\n      error = true;\n      setError({\n        ...error,\n        password: 'Password is required.'\n      });\n    }\n    if (!error) {\n      axios.post(`${process.env.REACT_APP_PUBLIC_BASE_URL}/login`, formData).then(response => {\n        localStorage.setItem('token', response.data.token);\n        const user = helpers.decryption(response.data.user);\n        if (helpers.checkRole(user, Super_Admin) || helpers.checkRole(user, Admin)) {\n          navigate('/admin-dashboard');\n        } else if (helpers.checkRole(user, Saler)) {\n          navigate('/saler-dashboard');\n        } else if (helpers.checkRole(user, User)) {\n          navigate('/user-dashboard');\n        }\n      }).catch(err => {\n        console.log(err);\n        Swal.fire(err.response.data.error, '', 'error');\n        setFormData(keys);\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container w-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \" Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    placeholder: \"Enter your email\",\n    onChange: handleChange,\n    value: formData === null || formData === void 0 ? void 0 : formData.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, error === null || error === void 0 ? void 0 : error.email)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \" Password \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"password\",\n    placeholder: \"Enter your password\",\n    onChange: handleChange,\n    value: formData === null || formData === void 0 ? void 0 : formData.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, error === null || error === void 0 ? void 0 : error.password)), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"m-2 btn btn-primary\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(GoogleLogin, {\n    onSuccess: responseMessage,\n    onError: errorMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 12\n    }\n  })));\n}\nexport default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","GoogleLogin","axios","helpers","Super_Admin","Admin","User","Saler","Swal","Login","navigate","keys","email","password","formData","setFormData","error","setError","responseMessage","response","post","process","env","REACT_APP_PUBLIC_BASE_URL","then","resp","localStorage","setItem","data","token","catch","err","console","log","errorMessage","alert","handleChange","e","name","value","target","handleSubmit","errro","user","decryption","checkRole","fire","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","onSuccess","onError"],"sources":["/var/www/html/dummy_applications/3rd_party_login/src/components/Login.component.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from \"react-router-dom\";\nimport { GoogleLogin } from '@react-oauth/google';\nimport axios from 'axios';\nimport helpers from '../helpers/helper.js';\nimport {Super_Admin,Admin,User,Saler} from '../helpers/roles.helpers.js';\nimport Swal from 'sweetalert2';\n\nfunction Login() {\n  const navigate = useNavigate();\n  const keys = ({email:'',password:''});\n  const [formData,setFormData] = useState(keys);\n  const [error,setError] = useState(keys);\n\n  //after successfully email login\n  const responseMessage = (response) => {\n    //login with google\n    axios.post(`${process.env.REACT_APP_PUBLIC_BASE_URL}/google-auth`,response).then((resp) => {\n      //set token in local storage\n      localStorage.setItem('token',resp.data.token);\n      navigate('/dashboard');\n    }).catch((err) => console.log('errors',err));\n  };\n\n  //after error from email\n  const errorMessage = (error) => {\n      console.log(error);\n      alert('Something went wrong');\n  };\n\n  //set form data\n  const handleChange = (e)=>{\n    const {name,value} = e.target;\n    setFormData({...formData,[name]:value});\n  }\n\n  //Login\n  const handleSubmit = (e) => {\n    let error = null;\n    if(formData.email == '')\n    {\n      error = true;\n      setError((errro)=>({...error,email:'Email is required.'}))\n    }\n    if(formData.password == '')\n    {\n      error = true;\n      setError({...error,password:'Password is required.'})\n    }\n    if(!error){\n      axios.post(`${process.env.REACT_APP_PUBLIC_BASE_URL}/login`,formData)\n      .then((response)=>{\n        localStorage.setItem('token',response.data.token);\n        const user = helpers.decryption(response.data.user);\n        if(helpers.checkRole(user,Super_Admin) || helpers.checkRole(user,Admin))\n        {\n          navigate('/admin-dashboard');\n        }\n        else if(helpers.checkRole(user,Saler))\n        {\n          navigate('/saler-dashboard');\n        }\n        else if(helpers.checkRole(user,User))\n        {\n          navigate('/user-dashboard');\n        }\n      }).catch((err)=>{\n        console.log(err);\n        Swal.fire(err.response.data.error,'','error');\n        setFormData(keys);\n      });\n   }\n  }\n\n  return (\n    <div className='container w-50'>\n        <div className='container'>\n          <div className='row mt-5'>\n            <label> Email</label>\n            <input type='text' name=\"email\" placeholder='Enter your email' onChange={handleChange} value={formData?.email}/>\n            <span>{error?.email}</span>\n          </div>\n          <div className='row mt-3'>\n            <label> Password </label>\n            <input type='text' name=\"password\" placeholder='Enter your password' onChange={handleChange} value={formData?.password}/>\n            <span>{error?.password}</span>\n          </div>\n          <button className='m-2 btn btn-primary' onClick={handleSubmit}>Login</button>\n           <GoogleLogin onSuccess={responseMessage} onError={errorMessage} />\n        </div>\n    </div>\n  );\n}\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}